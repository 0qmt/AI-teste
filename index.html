<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– Chatbot Gemini - Assistente IA AvanÃ§ado</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header fixo -->
        <header class="app-header">
            <div class="header-content">
                <h1>ğŸ¤– Assistente IA AvanÃ§ado</h1>
                <div class="header-center">
                    <!-- Seletor de Modelo IA -->
                    <div class="model-selector">
                        <label for="modelSelect" class="model-label">Modelo:</label>
                        <select id="modelSelect" class="form-control model-select">
                            <option value="flash">âš¡ Gemini 2.5 Flash</option>
                            <option value="pro">ğŸ§  Gemini 2.5 Pro</option>
                        </select>
                        <button class="btn btn--outline btn--sm model-info-btn" id="modelInfoBtn" title="InformaÃ§Ãµes do Modelo">
                            â„¹ï¸
                        </button>
                    </div>

                    <!-- Seletor de Templates -->
                    <div class="template-selector">
                        <label for="templateSelect" class="template-label">Template:</label>
                        <select id="templateSelect" class="form-control template-select">
                            <option value="geral_br">ğŸ‡§ğŸ‡· Geral BR</option>
                            <option value="estudos">ğŸ“š Tutor de Estudos</option>
                            <option value="programacao">ğŸ’» ProgramaÃ§Ã£o SÃªnior</option>
                            <option value="matematica">ğŸ”¢ MatemÃ¡tica Rigorosa</option>
                            <option value="imagem">ğŸ–¼ï¸ AnÃ¡lise de Imagem</option>
                            <option value="precisao_max">ğŸ¯ Alta PrecisÃ£o (2x Check)</option>
                        </select>
                        <button class="btn btn--outline btn--sm template-info-btn" id="templateInfoBtn" title="InformaÃ§Ãµes dos Templates">
                            â„¹ï¸
                        </button>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn--outline btn--sm" id="toggleConfig" title="Configurar Personalidade">
                        âš™ï¸ Config
                    </button>
                    <button class="btn btn--secondary btn--sm" id="clearChat" title="Limpar Conversa">
                        ğŸ—‘ï¸ Limpar
                    </button>
                </div>
            </div>
        </header>

        <!-- Modal de informaÃ§Ãµes do modelo -->
        <div class="modal hidden" id="modelInfoModal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalModelName">InformaÃ§Ãµes do Modelo</h3>
                    <button class="btn btn--outline btn--sm" id="closeModelModal">âŒ</button>
                </div>
                <div class="modal-body">
                    <div class="model-info">
                        <div class="model-description">
                            <span id="modalModelIcon">âš¡</span>
                            <span id="modalModelDescription">DescriÃ§Ã£o do modelo</span>
                        </div>
                        <div class="model-features">
                            <h4>CaracterÃ­sticas:</h4>
                            <ul id="modalModelFeatures"></ul>
                        </div>
                        <div class="model-best-for">
                            <h4>Ideal para:</h4>
                            <p id="modalModelBestFor">Casos de uso</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de informaÃ§Ãµes dos templates -->
        <div class="modal hidden" id="templateInfoModal">
            <div class="modal-backdrop"></div>
            <div class="modal-content template-modal">
                <div class="modal-header">
                    <h3>ğŸ“‹ Guia de Templates de Prompt</h3>
                    <button class="btn btn--outline btn--sm" id="closeTemplateModal">âŒ</button>
                </div>
                <div class="modal-body">
                    <div class="template-guide">
                        <div class="template-item">
                            <div class="template-header">
                                <span class="template-icon">ğŸ‡§ğŸ‡·</span>
                                <strong>Geral BR (PadrÃ£o)</strong>
                            </div>
                            <p>Assistente brasileiro prestativo e objetivo para uso geral.</p>
                        </div>
                        <div class="template-item">
                            <div class="template-header">
                                <span class="template-icon">ğŸ“š</span>
                                <strong>Tutor de Estudos</strong>
                            </div>
                            <p>Especializado em educaÃ§Ã£o com explicaÃ§Ãµes didÃ¡ticas e planos de estudo.</p>
                        </div>
                        <div class="template-item">
                            <div class="template-header">
                                <span class="template-icon">ğŸ’»</span>
                                <strong>ProgramaÃ§Ã£o SÃªnior</strong>
                            </div>
                            <p>Desenvolvimento de software com foco em qualidade, testes e boas prÃ¡ticas.</p>
                        </div>
                        <div class="template-item">
                            <div class="template-header">
                                <span class="template-icon">ğŸ”¢</span>
                                <strong>MatemÃ¡tica Rigorosa</strong>
                            </div>
                            <p>ResoluÃ§Ã£o matemÃ¡tica com derivaÃ§Ã£o passo a passo e verificaÃ§Ã£o dupla.</p>
                        </div>
                        <div class="template-item">
                            <div class="template-header">
                                <span class="template-icon">ğŸ–¼ï¸</span>
                                <strong>AnÃ¡lise de Imagem</strong>
                            </div>
                            <p>Especializado em anÃ¡lise detalhada de imagens e reconhecimento visual.</p>
                        </div>
                        <div class="template-item highlight">
                            <div class="template-header">
                                <span class="template-icon">ğŸ¯</span>
                                <strong>Alta PrecisÃ£o (2x Check)</strong>
                            </div>
                            <p>VerificaÃ§Ã£o em duas etapas para mÃ¡xima precisÃ£o - processo mais lento mas mais confiÃ¡vel.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SeÃ§Ã£o de configuraÃ§Ã£o de personalidade (colapsÃ¡vel) -->
        <section class="personality-config hidden" id="personalityConfig">
            <div class="config-content">
                <div class="config-header">
                    <h3>ğŸ­ ConfiguraÃ§Ã£o de Personalidade</h3>
                    <p>Defina como o assistente deve se comportar e responder:</p>
                </div>
                <div class="config-form">
                    <textarea 
                        id="personalityInput" 
                        class="form-control personality-textarea"
                        placeholder="Digite a personalidade personalizada do seu assistente..."
                        rows="3"
                    ></textarea>
                    <div class="config-actions">
                        <button class="btn btn--primary btn--sm" id="savePersonality">
                            ğŸ’¾ Salvar Personalidade
                        </button>
                        <button class="btn btn--outline btn--sm" id="resetPersonality">
                            ğŸ”„ Resetar Template
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ãrea principal de mensagens -->
        <main class="chat-main">
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <div class="message-avatar">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-text" id="welcomeMessage">
                            E aÃ­! ğŸ‘‹ Sou seu assistente IA brasileiro avanÃ§ado. Escolha o modelo e template que preferir, e vamos conversar! VocÃª pode enviar texto, imagens ou usar Ctrl+V para colar.
                        </div>
                        <div class="message-time" id="initialTime"></div>
                    </div>
                </div>
            </div>
            
            <!-- Indicador de carregamento -->
            <div class="loading-indicator hidden" id="loadingIndicator">
                <div class="loading-content">
                    <div class="loading-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span id="loadingText">ğŸ¤– Processando...</span>
                </div>
            </div>

            <!-- Indicador de verificaÃ§Ã£o dupla -->
            <div class="double-check-indicator hidden" id="doubleCheckIndicator">
                <div class="double-check-content">
                    <div class="double-check-steps">
                        <div class="step active" id="step1">
                            <div class="step-icon">1ï¸âƒ£</div>
                            <span>Rascunho</span>
                        </div>
                        <div class="step" id="step2">
                            <div class="step-icon">2ï¸âƒ£</div>
                            <span>VerificaÃ§Ã£o</span>
                        </div>
                    </div>
                    <span id="doubleCheckText">ğŸ¯ VerificaÃ§Ã£o dupla ativada...</span>
                </div>
            </div>
        </main>

        <!-- Preview de imagem colada/selecionada -->
        <div class="image-preview hidden" id="imagePreview">
            <div class="preview-content">
                <div class="preview-info">
                    <span id="imageSource">ğŸ“· Imagem selecionada</span>
                    <button class="btn btn--outline btn--sm" id="removeImage">âŒ Remover</button>
                </div>
                <img id="previewImage" alt="Preview da imagem" />
            </div>
        </div>

        <!-- Input fixo na parte inferior -->
        <footer class="chat-input-section">
            <div class="chat-input-container">
                <!-- Template ativo indicador -->
                <div class="template-indicator" id="templateIndicator">
                    <span id="currentTemplateIcon">ğŸ‡§ğŸ‡·</span>
                    <span id="currentTemplateName">Geral BR</span>
                </div>
                
                <!-- BotÃ£o visÃ­vel e input de file acessÃ­vel -->
                <div class="input-group">
                    <label for="imageInput" class="btn btn--outline input-btn" id="imageButton" title="Selecionar Imagem" tabindex="0" aria-label="Selecionar imagem">
                        ğŸ“·
                    </label>
                    <input type="file" id="imageInput" accept="image/jpeg,image/png,image/webp,image/gif,image/bmp" style="display:none;" tabindex="-1">
                    <input 
                        type="text" 
                        id="messageInput" 
                        class="form-control message-input" 
                        placeholder="Digite sua mensagem ou cole uma imagem (Ctrl+V)..."
                        autocomplete="off"
                    >
                    <button class="btn btn--primary input-btn" id="sendButton" title="Enviar Mensagem">
                        ğŸ“¤
                    </button>
                </div>
                <div class="input-hint">
                    ğŸ’¡ Dica: Use Ctrl+V para colar imagens diretamente ou clique no botÃ£o ğŸ“· para selecionar arquivos
                </div>
            </div>
        </footer>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
